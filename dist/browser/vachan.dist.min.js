"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}(function(a){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,b.vachan=a()}})(function(){return function(){function b(d,e,g){function a(j,i){if(!e[j]){if(!d[j]){var f="function"==typeof require&&require;if(!i&&f)return f(j,!0);if(h)return h(j,!0);var c=new Error("Cannot find module '"+j+"'");throw c.code="MODULE_NOT_FOUND",c}var k=e[j]={exports:{}};d[j][0].call(k.exports,function(b){var c=d[j][1][b];return a(c||b)},k,k.exports,b,d,e,g)}return e[j].exports}for(var h="function"==typeof require&&require,c=0;c<g.length;c++)a(g[c]);return a}return b}()({1:[function(a,b){"undefined"!=typeof b&&(b.exports=function(){var f={"*":[]},a=[];return{emit:function emit(b){for(var c=arguments.length,e=Array(1<c?c-1:0),d=1;d<c;d++)e[d-1]=arguments[d];return f[b]?f[b].forEach(function(b){return b.apply(void 0,e)}):0,a.forEach(function(c){return null==b.match(c.p)?0:c.f.apply(c,e)}),"*"==b?0:f["*"].forEach(function(c){return c.apply(void 0,[b].concat(e))}),this},on:function on(b,c){return b instanceof RegExp?a.push({p:b,f:c}):f[b]?f[b].push(c):(f[b]=[]).push(c),this},off:function off(b,c){var d;return b instanceof RegExp?a.forEach(function(e){return b.toString()==e.p.toString()&&c==e.f?d=e:0})||d?delete a[a.indexOf(d)]:0:f[b]?f[b].forEach(function(b){return c==b?d=b:0})||d?delete f[b][f[b].indexOf(d)]:0:0,this}}})},{}],2:[function(a,b){function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function e(a){if(l===setTimeout)return setTimeout(a,0);if((l===c||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function f(a){if(m===clearTimeout)return clearTimeout(a);if((m===d||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function g(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&h())}function h(){if(!q){var a=e(g);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,f(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};(function(){try{l="function"==typeof setTimeout?setTimeout:c}catch(a){l=c}try{m="function"==typeof clearTimeout?clearTimeout:d}catch(a){m=d}})();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||e(h)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(){return[]},n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],3:[function(a,b){(function(c){var d={Pending:Symbol("Pending"),Fulfilled:Symbol("Fulfilled"),Rejected:Symbol("Rejected")},e=Symbol("Resolve"),f=Symbol("Reject"),g=Symbol("Success Handler"),h=Symbol("Failure Handler"),i=Symbol("State"),j=Symbol("Value"),k=Symbol("Scheduler"),l=Symbol("Executor"),m=Symbol("Custom"),n=Symbol("Queue Task");d.Macro=Symbol("Macro"),d.Micro=Symbol("Micro"),d.Sync=Symbol("Sync"),d.default_type=d.Micro,d.schedulers={},d.schedulers[d.Macro]=function(a){return setTimeout(a,0)},d.schedulers[d.Micro]=function(a){return c.nextTick(a)},d.schedulers[d.Sync]=function(a){return a()},Object.seal(d.schedulers),d.realm=a("conciseee")(),d.events={},d.events.Created=Symbol("Created"),d.events.ExecutorExecuted=Symbol("ExecutorExecuted"),d.events.ExecutorThrows=Symbol("ExecutorThrows"),d.events.Fulfilled=Symbol("Fulfilled"),d.events.Rejected=Symbol("Rejected"),d.events.Preresolved=Symbol("Preresolved"),d.events.Prerejected=Symbol("Prerejected"),d.events.Chained=Symbol("Chained"),d.events.HandlerQueued=Symbol("HandlerQueued"),d.events.HandlerExecuted=Symbol("HandlerExecuted"),d.events.Rechained=Symbol("Rechained"),Object.freeze(d.events),d.raiseEvent=function(a,b){b.event=a,b.timestamp=new Date,d.realm.emit(a,b)};var o=function(a,b){if(null===a)b.resolve(a);else if(a===b.cp)b.reject(new TypeError("It cannot return the same Promise"));else if(a instanceof Object||a instanceof Function||"object"===_typeof(a)||"function"==typeof a){var c=!1,f=!1;try{var g=a.then;g!==void 0&&g instanceof Function&&"function"==typeof g?(g.call(a,function(a){c||f||o(a,b),c=!0},function(a){c||f||b.reject(a),f=!0}),d.raiseEvent(d.events.Rechained,{value:a,promise:b.cp})):b.resolve(a)}catch(a){c||f||b.reject(a)}}else b.resolve(a)},p=function(a,b){return function(c){try{o(a(c),b)}catch(a){b.reject(a)}d.raiseEvent(d.events.HandlerExecuted,{promise:b.cp,handler:a})}},q=function(){function a(b){var c=this,k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d.default_type;if(_classCallCheck(this,a),this[i]=d.Pending,this.setScheduler(k),this[j]=void 0,this[g]=[],this[h]=[],d.raiseEvent(d.events.Created,{promise:this}),b){this[b]=b;try{var l={resolve:function resolve(a){return c[e](a)},reject:function reject(a){return c[f](a)},cp:this};this[b](function(a){return o(a,l)},l.reject,this),d.raiseEvent(d.events.ExecutorExecuted,{promise:this,executor:this[b]})}catch(a){this[f](a),d.raiseEvent(d.events.ExecutorExecuted,{promise:this,executor:this[b]}),d.raiseEvent(d.events.ExecutorThrows,{promise:this,executor:this[b]})}}}return _createClass(a,null,[{key:"resolve",value:function resolve(b){return new a(function(a){return a(b)})}},{key:"reject",value:function reject(b){return new a(function(a,c){return c(b)})}},{key:"all",value:function all(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return 1==c.length&&Array.isArray(c[0])&&(c=c[0]),new a(function(a,b){var d=0,e=[],f=function(){return d==c.length?a(e):0},g=function(a){return++d&&e.push(a)&&f()},h=function(a){return b(a)},i=!0,j=!1,k=void 0;try{for(var l,m,n=c[Symbol.iterator]();!(i=(l=n.next()).done);i=!0)m=l.value,m.then(g,h)}catch(a){j=!0,k=a}finally{try{i||null==n["return"]||n["return"]()}finally{if(j)throw k}}})}},{key:"race",value:function race(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return 1==c.length&&Array.isArray(c[0])&&(c=c[0]),new a(function(a,b){var d=!1,e=function(b){return d?0:d=a(b)},f=function(a){return b(a)},g=!0,h=!1,i=void 0;try{for(var j,k,l=c[Symbol.iterator]();!(g=(j=l.next()).done);g=!0)k=j.value,k.then(e,f)}catch(a){h=!0,i=a}finally{try{g||null==l["return"]||l["return"]()}finally{if(h)throw i}}})}},{key:"any",value:function any(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return 1==c.length&&Array.isArray(c[0])&&(c=c[0]),new a(function(a,b){var d=0,e=!1,f=[],g=function(){return d==c.length?b(f):0},h=function(b){return e?0:e=a(b)},i=function(a){return++d&&f.push(a)&&g()},j=!0,k=!1,l=void 0;try{for(var m,n,o=c[Symbol.iterator]();!(j=(m=o.next()).done);j=!0)n=m.value,n.then(h,i)}catch(a){k=!0,l=a}finally{try{j||null==o["return"]||o["return"]()}finally{if(k)throw l}}})}},{key:"allSettled",value:function allSettled(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return 1==c.length&&Array.isArray(c[0])&&(c=c[0]),new a(function(a){var b=0,d=function(){return++b&&(b==c.length?a():0)},e=!0,f=!1,g=void 0;try{for(var h,i,j=c[Symbol.iterator]();!(e=(h=j.next()).done);e=!0)i=h.value,i.then(d,d)}catch(a){f=!0,g=a}finally{try{e||null==j["return"]||j["return"]()}finally{if(f)throw g}}})}},{key:"delay",value:function delay(b,c){return new a(function(a){return setTimeout(function(){return a(b)},c)})}},{key:"vachanify",value:function vachanify(b){return function(){for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return new a(function(a,c){0<d.length?b.apply(void 0,d.concat([function(b,d){return b?c(b):a(d)}])):b(function(b,d){return b?c(b):a(d)})})}}}]),_createClass(a,[{key:"isFulfilled",value:function isFulfilled(){return this[i]===d.Fulfilled}},{key:"isRejected",value:function isRejected(){return this[i]===d.Rejected}},{key:"isPending",value:function isPending(){return this[i]===d.Pending}},{key:e,value:function value(a){var b=this;if(this[i]===d.Pending){this[i]=d.Fulfilled,this[j]=a;var c=!0,e=!1,f=void 0;try{for(var h,k=function(){var c=h.value;b[n](function(){return c(a)})},l=this[g][Symbol.iterator]();!(c=(h=l.next()).done);c=!0)k()}catch(a){e=!0,f=a}finally{try{c||null==l["return"]||l["return"]()}finally{if(e)throw f}}d.raiseEvent(d.events.Fulfilled,{promise:this})}}},{key:f,value:function value(a){var b=this;if(this[i]===d.Pending){this[i]=d.Rejected,this[j]=a;var c=!0,e=!1,f=void 0;try{for(var g,k=function(){var c=g.value;b[n](function(){return c(a)})},l=this[h][Symbol.iterator]();!(c=(g=l.next()).done);c=!0)k()}catch(a){e=!0,f=a}finally{try{c||null==l["return"]||l["return"]()}finally{if(e)throw f}}d.raiseEvent(d.events.Rejected,{promise:this})}}},{key:"setScheduler",value:function setScheduler(a){return this[i]===d.Pending&&(a instanceof Function&&"function"==typeof a?(this[m]=!0,this[k]=a):a in d.schedulers&&(this[k]=a)),this}},{key:n,value:function value(a){this[m]?this[k](a):d.schedulers[this[k]](a),d.raiseEvent(d.events.HandlerQueued,{promise:this,scheduler:this[k],handler:a})}},{key:"then",value:function then(b,c){var k=this;"function"!=typeof b&&(b=void 0),"function"!=typeof c&&(c=void 0);var l=new a,m={resolve:function resolve(a){return l[e](a)},reject:function reject(a){return l[f](a)},cp:l};return this[i]===d.Fulfilled?(b?this[n](function(){return p(b,m)(k[j])}):this[n](function(){return l[e](k[j])}),d.raiseEvent(d.events.Preresolved,{substrate:this,parasite:l,handler:b})):this[i]===d.Rejected?(c?this[n](function(){return p(c,m)(k[j])}):this[n](function(){return l[f](k[j])}),d.raiseEvent(d.events.Prerejected,{substrate:this,parasite:l,handler:c})):(b?this[g].push(p(b,m)):this[g].push(m.resolve),c?this[h].push(p(c,m)):this[h].push(m.reject),d.raiseEvent(d.events.Chained,{substrate:this,parasite:l})),l}},{key:"fork",value:function fork(){for(var b=this,c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a.all(d.map(function(a){return a instanceof Function?b.then(a):b.then(a[0],a[1])}))}},{key:"join",value:function join(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return a.all.apply(a,[this].concat(c))}},{key:"tap",value:function tap(a,b){var c=this;return this.then(function(b){return a&&a(b),c},function(a){return b&&b(a),c})}},{key:"catch",value:function _catch(a){return this.then(void 0,a)}},{key:"finally",value:function _finally(a){return this.then(a,a)}},{key:"delay",value:function delay(b){var c=this;return new a(function(a,d){c.then(function(c){return setTimeout(function(){return a(c)},b)},function(a){return setTimeout(function(){return d(a)},b)})})}}]),a}();d.P=q;for(var r,s=0,t=Object.keys(d);s<t.length;s++)r=t[s],"realm"!=r&&"default_type"!=r&&Object.defineProperty(d,r,{configurable:!1,writable:!1});b.exports=d}).call(this,a("_process"))},{_process:2,conciseee:1}]},{},[3])(3)});